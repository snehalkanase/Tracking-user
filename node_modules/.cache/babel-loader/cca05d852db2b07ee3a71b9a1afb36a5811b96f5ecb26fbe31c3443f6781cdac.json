{"ast":null,"code":"import _slicedToArray from\"C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import\"../style.css\";import Webcam from'react-webcam';// import Camera from \"react-html5-camera-photo\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Home(_ref){var token=_ref.token,name=_ref.name;var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];var _React$useState3=React.useState({href:\"\",textContent:\"\"}),_React$useState4=_slicedToArray(_React$useState3,2),mapLink=_React$useState4[0],setMapLink=_React$useState4[1];var success=React.useCallback(function(position){var latitude=position.coords.latitude;var longitude=position.coords.longitude;setStatus(\"\");setMapLink({href:\"https://www.openstreetmap.org/#map=18/\".concat(latitude,\"/\").concat(longitude),textContent:\"Latitude: \".concat(latitude,\" \\xB0, Longitude: \").concat(longitude,\" \\xB0\")});},[]);var error=React.useCallback(function(){setStatus(\"Unable to retrieve your location\");},[]);var getLocation=React.useCallback(function(){setMapLink({href:\"\",textContent:\"\"});if(!navigator.geolocation){setStatus(\"Geolocation is not supported by your browser\");}else{setStatus(\"Locating…\");navigator.geolocation.getCurrentPosition(success,error);}},[success,error]);// CAMERA\nvar _React$useState5=React.useState(true),_React$useState6=_slicedToArray(_React$useState5,2),cameraActive=_React$useState6[0],setCameraActive=_React$useState6[1];var videoConstraints={width:380,height:720,facingMode:\"user\"};var webcamRef=React.useRef(null);var captureImage=React.useCallback(function(){var imageSrc=webcamRef.current.getScreenshot();localStorage.setItem('capturedImage',imageSrc);setCameraActive(false);},[webcamRef]);var savedImage=localStorage.getItem('capturedImage');return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome\"}),/*#__PURE__*/_jsx(\"h2\",{children:name})]}),cameraActive?/*#__PURE__*/_jsx(Webcam,{audio:false,ref:webcamRef,screenshotFormat:\"image/jpeg\",videoConstraints:videoConstraints}):/*#__PURE__*/_jsx(\"h2\",{children:savedImage}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:captureImage,disabled:!cameraActive,children:\"Capture Image\"}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-color\",onClick:getLocation,children:\"Current Location\"}),/*#__PURE__*/_jsx(\"p\",{id:\"status\",children:status}),/*#__PURE__*/_jsx(\"a\",{id:\"map-link\",href:mapLink.href,children:mapLink.textContent})]})})});}","map":{"version":3,"names":["React","Webcam","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_ref","token","name","_React$useState","useState","_React$useState2","_slicedToArray","status","setStatus","_React$useState3","href","textContent","_React$useState4","mapLink","setMapLink","success","useCallback","position","latitude","coords","longitude","concat","error","getLocation","navigator","geolocation","getCurrentPosition","_React$useState5","_React$useState6","cameraActive","setCameraActive","videoConstraints","width","height","facingMode","webcamRef","useRef","captureImage","imageSrc","current","getScreenshot","localStorage","setItem","savedImage","getItem","children","className","audio","ref","screenshotFormat","onClick","disabled","id"],"sources":["C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/src/pages/homes.jsx"],"sourcesContent":["import React from \"react\";\r\nimport \"../style.css\";\r\nimport Webcam from 'react-webcam';\r\n// import Camera from \"react-html5-camera-photo\";\r\n\r\nexport default function Home({ token, name }) {\r\n  const [status, setStatus] = React.useState(\"\");\r\n  const [mapLink, setMapLink] = React.useState({ href: \"\", textContent: \"\" });\r\n\r\n  const success = React.useCallback((position) => {\r\n    const latitude = position.coords.latitude;\r\n    const longitude = position.coords.longitude;\r\n\r\n    setStatus(\"\");\r\n    setMapLink({\r\n      href: `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`,\r\n      textContent: `Latitude: ${latitude} °, Longitude: ${longitude} °`,\r\n    });\r\n  }, []);\r\n\r\n  const error = React.useCallback(() => {\r\n    setStatus(\"Unable to retrieve your location\");\r\n  }, []);\r\n\r\n  const getLocation = React.useCallback(() => {\r\n    setMapLink({ href: \"\", textContent: \"\" });\r\n\r\n    if (!navigator.geolocation) {\r\n      setStatus(\"Geolocation is not supported by your browser\");\r\n    } else {\r\n      setStatus(\"Locating…\");\r\n      navigator.geolocation.getCurrentPosition(success, error);\r\n    }\r\n  }, [success, error]);\r\n\r\n  // CAMERA\r\n  const [cameraActive, setCameraActive] = React.useState(true);\r\n  const videoConstraints = {\r\n    width: 380,\r\n    height: 720,\r\n    facingMode: \"user\", \r\n  };\r\n\r\n  const webcamRef = React.useRef(null);\r\n\r\n  const captureImage = React.useCallback(() => {\r\n    const imageSrc = webcamRef.current.getScreenshot();\r\n    localStorage.setItem('capturedImage', imageSrc);\r\n    setCameraActive(false); \r\n  }, [webcamRef]);\r\n\r\n   const savedImage = localStorage.getItem('capturedImage');\r\n  return (\r\n    <>\r\n      <div className=\"main\">\r\n        <div>\r\n          <div className=\"heading\">\r\n            <h2>Welcome</h2>\r\n            <h2>{name}</h2>\r\n          </div>\r\n          {/* <button onClick={startCamera}>Start Camera</button> */}\r\n          {cameraActive ? (\r\n        <Webcam\r\n          audio={false}\r\n          ref={webcamRef}\r\n          screenshotFormat=\"image/jpeg\"\r\n          videoConstraints={videoConstraints}\r\n        />\r\n      ) : (\r\n        <h2>{savedImage}</h2>\r\n      )} <br />\r\n          <button onClick={captureImage} disabled = {!cameraActive}>Capture Image</button>\r\n\r\n          <button className=\"primary-color\" onClick={getLocation}>\r\n            Current Location\r\n          </button>\r\n          <p id=\"status\">{status}</p>\r\n          <a id=\"map-link\" href={mapLink.href}>\r\n            {mapLink.textContent}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}