{"ast":null,"code":"import _slicedToArray from\"C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"../style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Home(_ref){var token=_ref.token,name=_ref.name;//Location\nvar _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),status=_React$useState2[0],setStatus=_React$useState2[1];var _React$useState3=React.useState({href:\"\",textContent:\"\"}),_React$useState4=_slicedToArray(_React$useState3,2),mapLink=_React$useState4[0],setMapLink=_React$useState4[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),submitted=_useState2[0],setSubmitted=_useState2[1];var success=React.useCallback(function(position){var latitude=position.coords.latitude;var longitude=position.coords.longitude;setStatus(\"\");setMapLink({href:\"https://www.openstreetmap.org/#map=18/\".concat(latitude,\"/\").concat(longitude),textContent:\"Latitude: \".concat(latitude,\" \\xB0, Longitude: \").concat(longitude,\" \\xB0\")});},[]);var error=React.useCallback(function(){setStatus(\"Unable to retrieve your location\");},[]);var getLocation=React.useCallback(function(){setMapLink({href:\"\",textContent:\"\"});if(!navigator.geolocation){setStatus(\"Geolocation is not supported by your browser\");}else{setStatus(\"Locating…\");navigator.geolocation.getCurrentPosition(success,error);}},[success,error]);// CAMERA\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),imgData=_useState4[0],setImgData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),cameraActive=_useState6[0],setCameraActive=_useState6[1];var startCamera=function startCamera(){setCameraActive(true);if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:true}).then(function(stream){var video=document.getElementById(\"videoPreview\");video.srcObject=stream;video.play();}).catch(function(error){console.log(\"Enable to access camera: \",error);});}};var capturePhoto=function capturePhoto(){var video=document.getElementById(\"videoPreview\");var canvas=document.getElementById(\"photoCanvas\");var context=canvas.getContext(\"2d\");context.drawImage(video,0,0,canvas.width,canvas.height);var dataURL=canvas.toDataURL(\"image/png\");setImgData(dataURL);setCameraActive(false);video.srcObject.getTracks()[0].stop();};var submit=React.useCallback(function(){if(!imgData&&!mapLink.href){document.querySelector(\"p\").textContent=\"Provide photo and location\";}else if(!imgData){document.querySelector(\"p\").textContent=\"please capture Photo\";}else if(!mapLink.href){document.querySelector(\"p\").textContent=\"please Provide location\";}else{console.log(\"Submitted Successfully\");}setSubmitted(true);},[imgData,mapLink.href]);var isButtonDisabled=submitted||!imgData||!mapLink.href;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome\"}),/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsx(\"p\",{})]}),!cameraActive&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:startCamera,className:\"primary-color\",children:\"Start Camera\"})}),cameraActive&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"video\",{id:\"videoPreview\",width:\"100%\",autoPlay:true}),/*#__PURE__*/_jsx(\"button\",{onClick:capturePhoto,className:\"primary-color\",children:\"Capture Photo\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-color\",onClick:getLocation,children:\"Current Location\"}),/*#__PURE__*/_jsx(\"p\",{id:\"status\",children:status}),/*#__PURE__*/_jsx(\"a\",{id:\"map-link\",href:mapLink.href,children:mapLink.textContent}),imgData&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Preview\"}),/*#__PURE__*/_jsx(\"img\",{src:imgData,alt:\"Captured\",style:{maxWidth:\"200px\",height:\"250px\"}})]}),/*#__PURE__*/_jsx(\"canvas\",{id:\"photoCanvas\",style:{display:\"none\"}}),!submitted&&/*#__PURE__*/_jsx(\"form\",{onSubmit:submit,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"primary-color\",disabled:isButtonDisabled,children:\"Submit\"})})]})})});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_ref","token","name","_React$useState","_React$useState2","_slicedToArray","status","setStatus","_React$useState3","href","textContent","_React$useState4","mapLink","setMapLink","_useState","_useState2","submitted","setSubmitted","success","useCallback","position","latitude","coords","longitude","concat","error","getLocation","navigator","geolocation","getCurrentPosition","_useState3","_useState4","imgData","setImgData","_useState5","_useState6","cameraActive","setCameraActive","startCamera","mediaDevices","getUserMedia","video","then","stream","document","getElementById","srcObject","play","catch","console","log","capturePhoto","canvas","context","getContext","drawImage","width","height","dataURL","toDataURL","getTracks","stop","submit","querySelector","isButtonDisabled","children","className","onClick","id","autoPlay","src","alt","style","maxWidth","display","onSubmit","type","disabled"],"sources":["C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/src/pages/homes.jsx"],"sourcesContent":["import React, {  useState } from \"react\";\r\nimport \"../style.css\";\r\n\r\n\r\nexport default function Home({ token, name }) {\r\n  //Location\r\n  const [status, setStatus] = React.useState(\"\");\r\n  const [mapLink, setMapLink] = React.useState({ href: \"\", textContent: \"\" });\r\n  const [submitted, setSubmitted] = useState(false);\r\n\r\n  const success = React.useCallback((position) => {\r\n    const latitude = position.coords.latitude;\r\n    const longitude = position.coords.longitude;\r\n\r\n    setStatus(\"\");\r\n    setMapLink({\r\n      href: `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`,\r\n      textContent: `Latitude: ${latitude} °, Longitude: ${longitude} °`,\r\n    });\r\n  }, []);\r\n\r\n  const error = React.useCallback(() => {\r\n    setStatus(\"Unable to retrieve your location\");\r\n  }, []);\r\n\r\n  const getLocation = React.useCallback(() => {\r\n    setMapLink({ href: \"\", textContent: \"\" });\r\n\r\n    if (!navigator.geolocation) {\r\n      setStatus(\"Geolocation is not supported by your browser\");\r\n    } else {\r\n      setStatus(\"Locating…\");\r\n      navigator.geolocation.getCurrentPosition(success, error);\r\n    }\r\n  }, [success, error]);\r\n\r\n  // CAMERA\r\n\r\n  const [imgData, setImgData] = useState(null);\r\n  const [cameraActive, setCameraActive] = useState(false);\r\n\r\n  const startCamera = () => {\r\n    setCameraActive(true);\r\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n      navigator.mediaDevices\r\n        .getUserMedia({ video: true })\r\n        .then((stream) => {\r\n          let video = document.getElementById(\"videoPreview\");\r\n          video.srcObject = stream;\r\n          video.play();\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Enable to access camera: \", error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    let video = document.getElementById(\"videoPreview\");\r\n    let canvas = document.getElementById(\"photoCanvas\");\r\n    let context = canvas.getContext(\"2d\");\r\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n    let dataURL = canvas.toDataURL(\"image/png\");\r\n    setImgData(dataURL);\r\n    setCameraActive(false);\r\n    video.srcObject.getTracks()[0].stop();\r\n  };\r\n\r\n  const submit = React.useCallback(() => {\r\n    if (!imgData && !mapLink.href) {\r\n      document.querySelector(\"p\").textContent = \"Provide photo and location\";\r\n    } else if (!imgData) {\r\n      document.querySelector(\"p\").textContent = \"please capture Photo\";\r\n    } else if (!mapLink.href) {\r\n      document.querySelector(\"p\").textContent = \"please Provide location\";\r\n    } else {\r\n      console.log(\"Submitted Successfully\");\r\n    }\r\n    setSubmitted(true);\r\n  },[imgData, mapLink.href]);\r\n\r\n   const isButtonDisabled = submitted || !imgData || !mapLink.href;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"main\">\r\n        <div>\r\n          <div className=\"heading\">\r\n            <h2>Welcome</h2>\r\n            <h2>{name}</h2>\r\n            <p></p>\r\n          </div>\r\n          {!cameraActive && (\r\n            <div>\r\n              <button onClick={startCamera} className=\"primary-color\">\r\n                Start Camera\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {cameraActive && (\r\n            <div>\r\n              <video id=\"videoPreview\" width=\"100%\" autoPlay></video>\r\n              <button onClick={capturePhoto} className=\"primary-color\">\r\n                Capture Photo\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          <button className=\"primary-color\" onClick={getLocation}>\r\n            Current Location\r\n          </button>\r\n          <p id=\"status\">{status}</p>\r\n          <a id=\"map-link\" href={mapLink.href}>\r\n            {mapLink.textContent}\r\n          </a>\r\n\r\n          {imgData && (\r\n            <div>\r\n              <h2>Preview</h2>\r\n              <img src={imgData} alt=\"Captured\" style={{ maxWidth: \"200px\", height: \"250px\"}} />\r\n            </div>\r\n          )}\r\n          <canvas id=\"photoCanvas\" style={{ display: \"none\" }}></canvas>\r\n\r\n          {!submitted && (\r\n            <form onSubmit={submit}>\r\n              <button type=\"submit\" className=\"primary-color\" disabled={isButtonDisabled}>\r\n                Submit\r\n              </button>\r\n            </form>\r\n          )}\r\n\r\n          \r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}