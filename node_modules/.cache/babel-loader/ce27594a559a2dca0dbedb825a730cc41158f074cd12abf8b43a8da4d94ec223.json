{"ast":null,"code":"import _classCallCheck from \"C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Genxhire/Projects/Website/esurveillance-local-tracker/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { BaseRequestPolicy } from \"./requestPolicy\";\nimport { getDefaultUserAgentKey, getPlatformSpecificData } from \"./msRestUserAgentPolicy\";\nimport { Constants } from \"../util/constants\";\nimport { HttpHeaders } from \"../httpHeaders\";\nfunction getRuntimeInfo() {\n  var msRestRuntime = {\n    key: \"core-http\",\n    value: Constants.coreHttpVersion\n  };\n  return [msRestRuntime];\n}\nfunction getUserAgentString(telemetryInfo) {\n  var keySeparator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \" \";\n  var valueSeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"/\";\n  return telemetryInfo.map(function (info) {\n    var value = info.value ? \"\".concat(valueSeparator).concat(info.value) : \"\";\n    return \"\".concat(info.key).concat(value);\n  }).join(keySeparator);\n}\nexport var getDefaultUserAgentHeaderName = getDefaultUserAgentKey;\n/**\n * The default approach to generate user agents.\n * Uses static information from this package, plus system information available from the runtime.\n */\nexport function getDefaultUserAgentValue() {\n  var runtimeInfo = getRuntimeInfo();\n  var platformSpecificData = getPlatformSpecificData();\n  var userAgent = getUserAgentString(runtimeInfo.concat(platformSpecificData));\n  return userAgent;\n}\n/**\n * Returns a policy that adds the user agent header to outgoing requests based on the given {@link TelemetryInfo}.\n * @param userAgentData - Telemetry information.\n * @returns A new {@link UserAgentPolicy}.\n */\nexport function userAgentPolicy(userAgentData) {\n  var key = !userAgentData || userAgentData.key === undefined || userAgentData.key === null ? getDefaultUserAgentKey() : userAgentData.key;\n  var value = !userAgentData || userAgentData.value === undefined || userAgentData.value === null ? getDefaultUserAgentValue() : userAgentData.value;\n  return {\n    create: function create(nextPolicy, options) {\n      return new UserAgentPolicy(nextPolicy, options, key, value);\n    }\n  };\n}\n/**\n * A policy that adds the user agent header to outgoing requests based on the given {@link TelemetryInfo}.\n */\nexport var UserAgentPolicy = /*#__PURE__*/function (_BaseRequestPolicy) {\n  _inherits(UserAgentPolicy, _BaseRequestPolicy);\n  var _super = _createSuper(UserAgentPolicy);\n  function UserAgentPolicy(_nextPolicy, _options, headerKey, headerValue) {\n    var _this;\n    _classCallCheck(this, UserAgentPolicy);\n    _this = _super.call(this, _nextPolicy, _options);\n    _this._nextPolicy = _nextPolicy;\n    _this._options = _options;\n    _this.headerKey = headerKey;\n    _this.headerValue = headerValue;\n    return _this;\n  }\n  _createClass(UserAgentPolicy, [{\n    key: \"sendRequest\",\n    value: function sendRequest(request) {\n      this.addUserAgentHeader(request);\n      return this._nextPolicy.sendRequest(request);\n    }\n    /**\n     * Adds the user agent header to the outgoing request.\n     */\n  }, {\n    key: \"addUserAgentHeader\",\n    value: function addUserAgentHeader(request) {\n      if (!request.headers) {\n        request.headers = new HttpHeaders();\n      }\n      if (!request.headers.get(this.headerKey) && this.headerValue) {\n        request.headers.set(this.headerKey, this.headerValue);\n      }\n    }\n  }]);\n  return UserAgentPolicy;\n}(BaseRequestPolicy);","map":{"version":3,"names":["BaseRequestPolicy","getDefaultUserAgentKey","getPlatformSpecificData","Constants","HttpHeaders","getRuntimeInfo","msRestRuntime","key","value","coreHttpVersion","getUserAgentString","telemetryInfo","keySeparator","arguments","length","undefined","valueSeparator","map","info","concat","join","getDefaultUserAgentHeaderName","getDefaultUserAgentValue","runtimeInfo","platformSpecificData","userAgent","userAgentPolicy","userAgentData","create","nextPolicy","options","UserAgentPolicy","_BaseRequestPolicy","_inherits","_super","_createSuper","_nextPolicy","_options","headerKey","headerValue","_this","_classCallCheck","call","_createClass","sendRequest","request","addUserAgentHeader","headers","get","set"],"sources":["C:\\Users\\Genxhire\\Projects\\Website\\esurveillance-local-tracker\\node_modules\\@azure\\core-http\\src\\policies\\userAgentPolicy.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport {\n  BaseRequestPolicy,\n  RequestPolicy,\n  RequestPolicyFactory,\n  RequestPolicyOptions,\n} from \"./requestPolicy\";\nimport { getDefaultUserAgentKey, getPlatformSpecificData } from \"./msRestUserAgentPolicy\";\nimport { Constants } from \"../util/constants\";\nimport { HttpHeaders } from \"../httpHeaders\";\nimport { HttpOperationResponse } from \"../httpOperationResponse\";\nimport { WebResourceLike } from \"../webResource\";\n\n/**\n * Telemetry information. Key/value pairs to include inside the User-Agent string.\n */\nexport type TelemetryInfo = { key?: string; value?: string };\n\n/**\n * Options for adding user agent details to outgoing requests.\n */\nexport interface UserAgentOptions {\n  /**\n   * String prefix to add to the user agent for outgoing requests.\n   * Defaults to an empty string.\n   */\n  userAgentPrefix?: string;\n}\n\nfunction getRuntimeInfo(): TelemetryInfo[] {\n  const msRestRuntime = {\n    key: \"core-http\",\n    value: Constants.coreHttpVersion,\n  };\n\n  return [msRestRuntime];\n}\n\nfunction getUserAgentString(\n  telemetryInfo: TelemetryInfo[],\n  keySeparator = \" \",\n  valueSeparator = \"/\"\n): string {\n  return telemetryInfo\n    .map((info) => {\n      const value = info.value ? `${valueSeparator}${info.value}` : \"\";\n      return `${info.key}${value}`;\n    })\n    .join(keySeparator);\n}\n\nexport const getDefaultUserAgentHeaderName = getDefaultUserAgentKey;\n\n/**\n * The default approach to generate user agents.\n * Uses static information from this package, plus system information available from the runtime.\n */\nexport function getDefaultUserAgentValue(): string {\n  const runtimeInfo = getRuntimeInfo();\n  const platformSpecificData = getPlatformSpecificData();\n  const userAgent = getUserAgentString(runtimeInfo.concat(platformSpecificData));\n  return userAgent;\n}\n\n/**\n * Returns a policy that adds the user agent header to outgoing requests based on the given {@link TelemetryInfo}.\n * @param userAgentData - Telemetry information.\n * @returns A new {@link UserAgentPolicy}.\n */\nexport function userAgentPolicy(userAgentData?: TelemetryInfo): RequestPolicyFactory {\n  const key: string =\n    !userAgentData || userAgentData.key === undefined || userAgentData.key === null\n      ? getDefaultUserAgentKey()\n      : userAgentData.key;\n  const value: string =\n    !userAgentData || userAgentData.value === undefined || userAgentData.value === null\n      ? getDefaultUserAgentValue()\n      : userAgentData.value;\n\n  return {\n    create: (nextPolicy: RequestPolicy, options: RequestPolicyOptions) => {\n      return new UserAgentPolicy(nextPolicy, options, key, value);\n    },\n  };\n}\n\n/**\n * A policy that adds the user agent header to outgoing requests based on the given {@link TelemetryInfo}.\n */\nexport class UserAgentPolicy extends BaseRequestPolicy {\n  constructor(\n    readonly _nextPolicy: RequestPolicy,\n    readonly _options: RequestPolicyOptions,\n    protected headerKey: string,\n    protected headerValue: string\n  ) {\n    super(_nextPolicy, _options);\n  }\n\n  sendRequest(request: WebResourceLike): Promise<HttpOperationResponse> {\n    this.addUserAgentHeader(request);\n    return this._nextPolicy.sendRequest(request);\n  }\n\n  /**\n   * Adds the user agent header to the outgoing request.\n   */\n  addUserAgentHeader(request: WebResourceLike): void {\n    if (!request.headers) {\n      request.headers = new HttpHeaders();\n    }\n\n    if (!request.headers.get(this.headerKey) && this.headerValue) {\n      request.headers.set(this.headerKey, this.headerValue);\n    }\n  }\n}\n"],"mappings":";;;;AAAA;AACA;AAEA,SACEA,iBAAiB,QAIZ,iBAAiB;AACxB,SAASC,sBAAsB,EAAEC,uBAAuB,QAAQ,yBAAyB;AACzF,SAASC,SAAS,QAAQ,mBAAmB;AAC7C,SAASC,WAAW,QAAQ,gBAAgB;AAoB5C,SAASC,cAAcA,CAAA;EACrB,IAAMC,aAAa,GAAG;IACpBC,GAAG,EAAE,WAAW;IAChBC,KAAK,EAAEL,SAAS,CAACM;GAClB;EAED,OAAO,CAACH,aAAa,CAAC;AACxB;AAEA,SAASI,kBAAkBA,CACzBC,aAA8B,EAEV;EAAA,IADpBC,YAAY,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,GAAG;EAAA,IAClBG,cAAc,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,GAAG;EAEpB,OAAOF,aAAa,CACjBM,GAAG,CAAC,UAACC,IAAI,EAAI;IACZ,IAAMV,KAAK,GAAGU,IAAI,CAACV,KAAK,MAAAW,MAAA,CAAMH,cAAc,EAAAG,MAAA,CAAGD,IAAI,CAACV,KAAK,IAAK,EAAE;IAChE,UAAAW,MAAA,CAAUD,IAAI,CAACX,GAAG,EAAAY,MAAA,CAAGX,KAAK;EAC5B,CAAC,CAAC,CACDY,IAAI,CAACR,YAAY,CAAC;AACvB;AAEA,OAAO,IAAMS,6BAA6B,GAAGpB,sBAAsB;AAEnE;;;;AAIA,OAAM,SAAUqB,wBAAwBA,CAAA;EACtC,IAAMC,WAAW,GAAGlB,cAAc,EAAE;EACpC,IAAMmB,oBAAoB,GAAGtB,uBAAuB,EAAE;EACtD,IAAMuB,SAAS,GAAGf,kBAAkB,CAACa,WAAW,CAACJ,MAAM,CAACK,oBAAoB,CAAC,CAAC;EAC9E,OAAOC,SAAS;AAClB;AAEA;;;;;AAKA,OAAM,SAAUC,eAAeA,CAACC,aAA6B;EAC3D,IAAMpB,GAAG,GACP,CAACoB,aAAa,IAAIA,aAAa,CAACpB,GAAG,KAAKQ,SAAS,IAAIY,aAAa,CAACpB,GAAG,KAAK,IAAI,GAC3EN,sBAAsB,EAAE,GACxB0B,aAAa,CAACpB,GAAG;EACvB,IAAMC,KAAK,GACT,CAACmB,aAAa,IAAIA,aAAa,CAACnB,KAAK,KAAKO,SAAS,IAAIY,aAAa,CAACnB,KAAK,KAAK,IAAI,GAC/Ec,wBAAwB,EAAE,GAC1BK,aAAa,CAACnB,KAAK;EAEzB,OAAO;IACLoB,MAAM,EAAE,SAAAA,OAACC,UAAyB,EAAEC,OAA6B,EAAI;MACnE,OAAO,IAAIC,eAAe,CAACF,UAAU,EAAEC,OAAO,EAAEvB,GAAG,EAAEC,KAAK,CAAC;IAC7D;GACD;AACH;AAEA;;;AAGA,WAAauB,eAAgB,0BAAAC,kBAAA;EAAAC,SAAA,CAAAF,eAAA,EAAAC,kBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,eAAA;EAC3B,SAAAA,gBACWK,WAA0B,EAC1BC,QAA8B,EAC7BC,SAAiB,EACjBC,WAAmB;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAV,eAAA;IAE7BS,KAAA,GAAAN,MAAA,CAAAQ,IAAA,OAAMN,WAAW,EAAEC,QAAQ;IALlBG,KAAA,CAAAJ,WAAW,GAAXA,WAAW;IACXI,KAAA,CAAAH,QAAQ,GAARA,QAAQ;IACPG,KAAA,CAAAF,SAAS,GAATA,SAAS;IACTE,KAAA,CAAAD,WAAW,GAAXA,WAAW;IAAQ,OAAAC,KAAA;EAG/B;EAACG,YAAA,CAAAZ,eAAA;IAAAxB,GAAA;IAAAC,KAAA,EAED,SAAAoC,YAAYC,OAAwB;MAClC,IAAI,CAACC,kBAAkB,CAACD,OAAO,CAAC;MAChC,OAAO,IAAI,CAACT,WAAW,CAACQ,WAAW,CAACC,OAAO,CAAC;IAC9C;IAEA;;;EAAA;IAAAtC,GAAA;IAAAC,KAAA,EAGA,SAAAsC,mBAAmBD,OAAwB;MACzC,IAAI,CAACA,OAAO,CAACE,OAAO,EAAE;QACpBF,OAAO,CAACE,OAAO,GAAG,IAAI3C,WAAW,EAAE;;MAGrC,IAAI,CAACyC,OAAO,CAACE,OAAO,CAACC,GAAG,CAAC,IAAI,CAACV,SAAS,CAAC,IAAI,IAAI,CAACC,WAAW,EAAE;QAC5DM,OAAO,CAACE,OAAO,CAACE,GAAG,CAAC,IAAI,CAACX,SAAS,EAAE,IAAI,CAACC,WAAW,CAAC;;IAEzD;EAAC;EAAA,OAAAR,eAAA;AAAA,EA1BkC/B,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}