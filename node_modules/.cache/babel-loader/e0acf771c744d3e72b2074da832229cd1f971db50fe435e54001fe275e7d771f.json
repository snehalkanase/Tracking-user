{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\nimport { base64ToBytes, bufferToBase64 } from \"./base64.browser\";\nimport { bufferToHex } from \"./hex\";\nimport { utf8ToBytes } from \"./utf8.browser\";\nlet subtleCrypto;\n/**\n * Returns a cached reference to the Web API crypto.subtle object.\n * @internal\n */\nfunction getCrypto() {\n  if (subtleCrypto) {\n    return subtleCrypto;\n  }\n  if (!self.crypto || !self.crypto.subtle) {\n    throw new Error(\"Your browser environment does not support cryptography functions.\");\n  }\n  subtleCrypto = self.crypto.subtle;\n  return subtleCrypto;\n}\n/**\n * Generates a SHA-256 HMAC signature.\n * @param key - The HMAC key represented as a base64 string, used to generate the cryptographic HMAC hash.\n * @param stringToSign - The data to be signed.\n * @param encoding - The textual encoding to use for the returned HMAC digest.\n */\nexport async function computeSha256Hmac(key, stringToSign, encoding) {\n  const crypto = getCrypto();\n  const keyBytes = base64ToBytes(key);\n  const stringToSignBytes = utf8ToBytes(stringToSign);\n  const cryptoKey = await crypto.importKey(\"raw\", keyBytes, {\n    name: \"HMAC\",\n    hash: {\n      name: \"SHA-256\"\n    }\n  }, false, [\"sign\"]);\n  const signature = await crypto.sign({\n    name: \"HMAC\",\n    hash: {\n      name: \"SHA-256\"\n    }\n  }, cryptoKey, stringToSignBytes);\n  switch (encoding) {\n    case \"base64\":\n      return bufferToBase64(signature);\n    case \"hex\":\n      return bufferToHex(signature);\n  }\n}\n/**\n * Generates a SHA-256 hash.\n * @param content - The data to be included in the hash.\n * @param encoding - The textual encoding to use for the returned hash.\n */\nexport async function computeSha256Hash(content, encoding) {\n  const contentBytes = utf8ToBytes(content);\n  const digest = await getCrypto().digest({\n    name: \"SHA-256\"\n  }, contentBytes);\n  switch (encoding) {\n    case \"base64\":\n      return bufferToBase64(digest);\n    case \"hex\":\n      return bufferToHex(digest);\n  }\n}","map":{"version":3,"names":["base64ToBytes","bufferToBase64","bufferToHex","utf8ToBytes","subtleCrypto","getCrypto","self","crypto","subtle","Error","computeSha256Hmac","key","stringToSign","encoding","keyBytes","stringToSignBytes","cryptoKey","importKey","name","hash","signature","sign","computeSha256Hash","content","contentBytes","digest"],"sources":["C:\\Users\\Genxhire\\Projects\\Website\\esurveillance-local-tracker\\node_modules\\@azure\\core-util\\src\\sha256.browser.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { base64ToBytes, bufferToBase64 } from \"./base64.browser\";\nimport { bufferToHex } from \"./hex\";\nimport { utf8ToBytes } from \"./utf8.browser\";\n\n// stubs for browser self.crypto\ninterface JsonWebKey {}\ninterface CryptoKey {}\ntype KeyUsage =\n  | \"decrypt\"\n  | \"deriveBits\"\n  | \"deriveKey\"\n  | \"encrypt\"\n  | \"sign\"\n  | \"unwrapKey\"\n  | \"verify\"\n  | \"wrapKey\";\ninterface Algorithm {\n  name: string;\n}\ninterface SubtleCrypto {\n  importKey(\n    format: string,\n    keyData: JsonWebKey,\n    algorithm: HmacImportParams,\n    extractable: boolean,\n    usage: KeyUsage[]\n  ): Promise<CryptoKey>;\n  sign(\n    algorithm: HmacImportParams,\n    key: CryptoKey,\n    data: ArrayBufferView | ArrayBuffer\n  ): Promise<ArrayBuffer>;\n  digest(algorithm: Algorithm, data: ArrayBufferView | ArrayBuffer): Promise<ArrayBuffer>;\n}\ninterface Crypto {\n  readonly subtle: SubtleCrypto;\n  getRandomValues<T extends ArrayBufferView | null>(array: T): T;\n}\ndeclare const self: {\n  crypto: Crypto;\n};\ninterface HmacImportParams {\n  name: string;\n  hash: Algorithm;\n  length?: number;\n}\n\nlet subtleCrypto: SubtleCrypto | undefined;\n\n/**\n * Returns a cached reference to the Web API crypto.subtle object.\n * @internal\n */\nfunction getCrypto(): SubtleCrypto {\n  if (subtleCrypto) {\n    return subtleCrypto;\n  }\n\n  if (!self.crypto || !self.crypto.subtle) {\n    throw new Error(\"Your browser environment does not support cryptography functions.\");\n  }\n\n  subtleCrypto = self.crypto.subtle;\n  return subtleCrypto;\n}\n\n/**\n * Generates a SHA-256 HMAC signature.\n * @param key - The HMAC key represented as a base64 string, used to generate the cryptographic HMAC hash.\n * @param stringToSign - The data to be signed.\n * @param encoding - The textual encoding to use for the returned HMAC digest.\n */\nexport async function computeSha256Hmac(\n  key: string,\n  stringToSign: string,\n  encoding: \"base64\" | \"hex\"\n): Promise<string> {\n  const crypto = getCrypto();\n  const keyBytes = base64ToBytes(key);\n  const stringToSignBytes = utf8ToBytes(stringToSign);\n\n  const cryptoKey = await crypto.importKey(\n    \"raw\",\n    keyBytes,\n    {\n      name: \"HMAC\",\n      hash: { name: \"SHA-256\" },\n    },\n    false,\n    [\"sign\"]\n  );\n  const signature = await crypto.sign(\n    {\n      name: \"HMAC\",\n      hash: { name: \"SHA-256\" },\n    },\n    cryptoKey,\n    stringToSignBytes\n  );\n\n  switch (encoding) {\n    case \"base64\":\n      return bufferToBase64(signature);\n    case \"hex\":\n      return bufferToHex(signature);\n  }\n}\n\n/**\n * Generates a SHA-256 hash.\n * @param content - The data to be included in the hash.\n * @param encoding - The textual encoding to use for the returned hash.\n */\nexport async function computeSha256Hash(\n  content: string,\n  encoding: \"base64\" | \"hex\"\n): Promise<string> {\n  const contentBytes = utf8ToBytes(content);\n  const digest = await getCrypto().digest({ name: \"SHA-256\" }, contentBytes);\n\n  switch (encoding) {\n    case \"base64\":\n      return bufferToBase64(digest);\n    case \"hex\":\n      return bufferToHex(digest);\n  }\n}\n"],"mappings":"AAAA;AACA;AAEA,SAASA,aAAa,EAAEC,cAAc,QAAQ,kBAAkB;AAChE,SAASC,WAAW,QAAQ,OAAO;AACnC,SAASC,WAAW,QAAQ,gBAAgB;AA6C5C,IAAIC,YAAsC;AAE1C;;;;AAIA,SAASC,SAASA,CAAA;EAChB,IAAID,YAAY,EAAE;IAChB,OAAOA,YAAY;;EAGrB,IAAI,CAACE,IAAI,CAACC,MAAM,IAAI,CAACD,IAAI,CAACC,MAAM,CAACC,MAAM,EAAE;IACvC,MAAM,IAAIC,KAAK,CAAC,mEAAmE,CAAC;;EAGtFL,YAAY,GAAGE,IAAI,CAACC,MAAM,CAACC,MAAM;EACjC,OAAOJ,YAAY;AACrB;AAEA;;;;;;AAMA,OAAO,eAAeM,iBAAiBA,CACrCC,GAAW,EACXC,YAAoB,EACpBC,QAA0B;EAE1B,MAAMN,MAAM,GAAGF,SAAS,EAAE;EAC1B,MAAMS,QAAQ,GAAGd,aAAa,CAACW,GAAG,CAAC;EACnC,MAAMI,iBAAiB,GAAGZ,WAAW,CAACS,YAAY,CAAC;EAEnD,MAAMI,SAAS,GAAG,MAAMT,MAAM,CAACU,SAAS,CACtC,KAAK,EACLH,QAAQ,EACR;IACEI,IAAI,EAAE,MAAM;IACZC,IAAI,EAAE;MAAED,IAAI,EAAE;IAAS;GACxB,EACD,KAAK,EACL,CAAC,MAAM,CAAC,CACT;EACD,MAAME,SAAS,GAAG,MAAMb,MAAM,CAACc,IAAI,CACjC;IACEH,IAAI,EAAE,MAAM;IACZC,IAAI,EAAE;MAAED,IAAI,EAAE;IAAS;GACxB,EACDF,SAAS,EACTD,iBAAiB,CAClB;EAED,QAAQF,QAAQ;IACd,KAAK,QAAQ;MACX,OAAOZ,cAAc,CAACmB,SAAS,CAAC;IAClC,KAAK,KAAK;MACR,OAAOlB,WAAW,CAACkB,SAAS,CAAC;;AAEnC;AAEA;;;;;AAKA,OAAO,eAAeE,iBAAiBA,CACrCC,OAAe,EACfV,QAA0B;EAE1B,MAAMW,YAAY,GAAGrB,WAAW,CAACoB,OAAO,CAAC;EACzC,MAAME,MAAM,GAAG,MAAMpB,SAAS,EAAE,CAACoB,MAAM,CAAC;IAAEP,IAAI,EAAE;EAAS,CAAE,EAAEM,YAAY,CAAC;EAE1E,QAAQX,QAAQ;IACd,KAAK,QAAQ;MACX,OAAOZ,cAAc,CAACwB,MAAM,CAAC;IAC/B,KAAK,KAAK;MACR,OAAOvB,WAAW,CAACuB,MAAM,CAAC;;AAEhC"},"metadata":{},"sourceType":"module","externalDependencies":[]}